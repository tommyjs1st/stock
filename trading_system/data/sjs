    
    def place_order(self, symbol: str, side: str, quantity: int, price: int = 0) -> Dict:
        """ì£¼ë¬¸ ì‹¤í–‰ (ì£¼ë¬¸ë²ˆí˜¸ íŒŒì‹± ê°œì„ )"""
        url = f"{self.base_url}/uapi/domestic-stock/v1/trading/order-cash"
        
        is_mock = "vts" in self.base_url.lower()
        
        if is_mock:
            tr_id = "VTTC0802U" if side == "BUY" else "VTTC0801U"
        else:
            tr_id = "TTTC0802U" if side == "BUY" else "TTTC0801U"
        
        if price == 0:
            ord_dvsn = "01"  # ì‹œì¥ê°€
            ord_unpr = "0"
        else:
            ord_dvsn = "00"  # ì§€ì •ê°€
            ord_unpr = str(price)
        
        headers = {
            "content-type": "application/json",
            "authorization": f"Bearer {self.get_access_token()}",
            "appkey": self.app_key,
            "appsecret": self.app_secret,
            "tr_id": tr_id
        }
    
        data = {
            "CANO": self.account_no.split('-')[0],
            "ACNT_PRDT_CD": self.account_no.split('-')[1],
            "PDNO": symbol,
            "ORD_DVSN": ord_dvsn,
            "ORD_QTY": str(quantity),
            "ORD_UNPR": ord_unpr
        }
    
        try:
            response = requests.post(url, headers=headers, data=json.dumps(data), timeout=30)
            response.raise_for_status()
            result = response.json()
    
            # ë””ë²„ê¹…ì„ ìœ„í•œ ì‘ë‹µ êµ¬ì¡° ë¡œê·¸
            print(f"ğŸ” API ì‘ë‹µ êµ¬ì¡°: {json.dumps(result, indent=2, ensure_ascii=False)}")
    
            if result.get('rt_cd') == '0':
                # ë‹¤ì–‘í•œ ê°€ëŠ¥í•œ ì£¼ë¬¸ë²ˆí˜¸ ìœ„ì¹˜ í™•ì¸
                output = result.get('output', {})
                output1 = result.get('output1', {})
                
                # ì£¼ë¬¸ë²ˆí˜¸ ì¶”ì¶œ ì‹œë„ (ì—¬ëŸ¬ ê°€ëŠ¥í•œ í‚¤ í™•ì¸)
                order_no = None
                
                # 1. output.odno
                if isinstance(output, dict) and 'odno' in output:
                    order_no = output.get('odno')
                    print(f"âœ… ì£¼ë¬¸ë²ˆí˜¸ output.odnoì—ì„œ ë°œê²¬: {order_no}")
                    
                # 2. output1.odno  
                elif isinstance(output1, dict) and 'odno' in output1:
                    order_no = output1.get('odno')
                    print(f"âœ… ì£¼ë¬¸ë²ˆí˜¸ output1.odnoì—ì„œ ë°œê²¬: {order_no}")
                    
                # 3. ë£¨íŠ¸ ë ˆë²¨ì—ì„œ ì§ì ‘
                elif 'odno' in result:
                    order_no = result.get('odno')
                    print(f"âœ… ì£¼ë¬¸ë²ˆí˜¸ ë£¨íŠ¸ì—ì„œ ë°œê²¬: {order_no}")
                    
                # 4. KRX_FWDG_ORD_ORGNO (ì›ì£¼ë¬¸ë²ˆí˜¸)
                elif isinstance(output, dict) and 'KRX_FWDG_ORD_ORGNO' in output:
                    order_no = output.get('KRX_FWDG_ORD_ORGNO')
                    print(f"âœ… ì£¼ë¬¸ë²ˆí˜¸ KRX_FWDG_ORD_ORGNOì—ì„œ ë°œê²¬: {order_no}")
                    
                # 5. ODNO (ëŒ€ë¬¸ì)
                elif isinstance(output, dict) and 'ODNO' in output:
                    order_no = output.get('ODNO')
                    print(f"âœ… ì£¼ë¬¸ë²ˆí˜¸ ODNOì—ì„œ ë°œê²¬: {order_no}")
                    
                # 6. ord_no (ë‹¤ë¥¸ ê°€ëŠ¥í•œ í‚¤)
                elif isinstance(output, dict) and 'ord_no' in output:
                    order_no = output.get('ord_no')
                    print(f"âœ… ì£¼ë¬¸ë²ˆí˜¸ ord_noì—ì„œ ë°œê²¬: {order_no}")
                
                # ì£¼ë¬¸ë²ˆí˜¸ ê²€ì¦
                if order_no and str(order_no).strip() and str(order_no).strip().lower() != 'unknown':
                    print(f"âœ… ìœ íš¨í•œ ì£¼ë¬¸ë²ˆí˜¸ í™•ì¸: {order_no}")
                    return {'success': True, 'order_no': str(order_no).strip(), 'limit_price': price}
                else:
                    # ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ëŠ” ê²½ìš° - ì‹œì¥ê°€ëŠ” ì¦‰ì‹œ ì²´ê²°ë¡œ ì²˜ë¦¬
                    if ord_dvsn == "01":  # ì‹œì¥ê°€ ì£¼ë¬¸
                        print(f"âš¡ ì‹œì¥ê°€ ì£¼ë¬¸ - ì£¼ë¬¸ë²ˆí˜¸ ì—†ìŒ (ì¦‰ì‹œì²´ê²°)")
                        return {'success': True, 'order_no': 'MARKET_ORDER_IMMEDIATE', 'limit_price': 0}
                    else:
                        print(f"âŒ ì§€ì •ê°€ ì£¼ë¬¸ì´ì§€ë§Œ ì£¼ë¬¸ë²ˆí˜¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ")
                        return {'success': False, 'error': 'ì£¼ë¬¸ë²ˆí˜¸ íŒŒì‹± ì‹¤íŒ¨'}
            else:
                error_msg = result.get('msg1', result.get('message', 'Unknown error'))
                print(f"âŒ ì£¼ë¬¸ ì‹¤íŒ¨: {error_msg}")
                return {'success': False, 'error': error_msg}
    
        except Exception as e:
            print(f"âŒ ì£¼ë¬¸ ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜: {e}")
            return {'success': False, 'error': str(e)}
    
