    
    def process_sell_for_symbol(self, symbol: str, position: dict):
        """ê°œì„ ëœ ê°œë³„ ì¢…ëª© ë§¤ë„ ì²˜ë¦¬ - ì ì ˆí•œ ìµì ˆ íƒ€ì´ë° ì¶”ê°€"""
        try:
            if symbol not in self.all_positions:
                return
                
            quantity = position['quantity']
            profit_loss_pct = position['profit_loss']
            profit_loss_decimal = profit_loss_pct / 100
            stock_name = self.get_stock_name(symbol)
            current_price = position['current_price']
            
            # ğŸ”¥ 1ìˆœìœ„: ê·¹ë‹¨ì  ì†ì‹¤ ë°©ì§€ (-7% ì´ìƒ ì†ì‹¤ì‹œ ë¬´ì¡°ê±´ ì†ì ˆ)
            if profit_loss_decimal <= -0.07:
                self.logger.warning(f"ğŸ›‘ {stock_name}({symbol}) ê·¹í•œ ì†ì ˆ! ({profit_loss_pct:+.2f}%)")
                self.execute_sell(symbol, quantity, "urgent", "ê·¹í•œì†ì ˆ")
                return
            
            # ğŸ”¥ 2ìˆœìœ„: ë‹¨ê³„ì  ìµì ˆ ì‹œìŠ¤í…œ (ê¸°ì¡´ 20%ì—ì„œ ê°œì„ )
            if profit_loss_decimal >= 0.15:  # 15% ì´ìƒ ìµì ˆ
                can_sell, sell_reason = self.position_manager.can_sell_symbol(symbol, quantity)
                if can_sell:
                    self.logger.info(f"ğŸ¯ {stock_name}({symbol}) 1ì°¨ ìµì ˆ! ({profit_loss_pct:+.2f}%)")
                    self.execute_sell(symbol, quantity, "aggressive_limit", "1ì°¨ìµì ˆ")
                    return
            elif profit_loss_decimal >= 0.10:  # 10% ì´ìƒì—ì„œ ê¸°ìˆ ì  í™•ì¸ í›„ ìµì ˆ
                daily_analysis = self.hybrid_strategy.analyze_daily_strategy(symbol)
                if daily_analysis['signal'] == 'SELL' and daily_analysis['strength'] >= 2.0:  # ê¸°ì¤€ ì™„í™”
                    can_sell, sell_reason = self.position_manager.can_sell_symbol(symbol, quantity)
                    if can_sell:
                        self.logger.info(f"ğŸ¯ {stock_name}({symbol}) ê¸°ìˆ ì  ìµì ˆ! ({profit_loss_pct:+.2f}%)")
                        self.execute_sell(symbol, quantity, "aggressive_limit", "ê¸°ìˆ ì ìµì ˆ")
                        return
            
            # ğŸ”¥ 3ìˆœìœ„: ì§€ëŠ¥í˜• ì†ì ˆ íŒë‹¨ (-3% ~ -7% êµ¬ê°„ì—ì„œ ìƒìŠ¹ ê°€ëŠ¥ì„± ê²€í† )
            if -0.07 < profit_loss_decimal <= -0.03:
                recovery_analysis = self.analyze_recovery_potential(symbol, current_price)
                
                if recovery_analysis['should_hold']:
                    self.logger.info(f"ğŸ’ {stock_name}({symbol}) ì†ì ˆ ë³´ë¥˜: {recovery_analysis['reason']} "
                                   f"(í˜„ì¬: {profit_loss_pct:+.2f}%)")
                    return
                else:
                    self.logger.warning(f"ğŸ›‘ {stock_name}({symbol}) ì§€ëŠ¥í˜• ì†ì ˆ: {recovery_analysis['reason']} "
                                      f"({profit_loss_pct:+.2f}%)")
                    self.execute_sell(symbol, quantity, "aggressive_limit", "ì§€ëŠ¥í˜•ì†ì ˆ")
                    return
            
            # ğŸ”¥ 4ìˆœìœ„: ê¸‰ë½ ê°ì§€
            rapid_drop = self.check_rapid_drop(symbol, current_price)
            if rapid_drop['should_sell']:
                recovery_analysis = self.analyze_recovery_potential(symbol, current_price)
                
                if recovery_analysis['strong_recovery_signal']:
                    self.logger.info(f"ğŸ”„ {stock_name}({symbol}) ê¸‰ë½ì´ì§€ë§Œ íšŒë³µ ì‹ í˜¸ë¡œ ë³´ìœ : {recovery_analysis['reason']}")
                    return
                else:
                    self.logger.warning(f"ğŸ’¥ {stock_name}({symbol}) ê¸‰ë½ ë§¤ë„: {rapid_drop['reason']}")
                    self.execute_sell(symbol, quantity, "urgent", rapid_drop['reason'])
                    return
            
            # ğŸ”¥ 5ìˆœìœ„: ì¼ë°˜ì  ê¸°ìˆ ì  ë§¤ë„ (ê¸°ì¤€ ì™„í™”)
            if symbol in self.symbols:
                daily_analysis = self.hybrid_strategy.analyze_daily_strategy(symbol)
                
                if daily_analysis['signal'] == 'SELL' and daily_analysis['strength'] >= 2.5:  # 3.5 â†’ 2.5ë¡œ ì™„í™”
                    can_sell, sell_reason = self.position_manager.can_sell_symbol(symbol, quantity)
                    
                    if can_sell:
                        self.logger.info(f"ğŸ“‰ {stock_name}({symbol}) ê¸°ìˆ ì  ë§¤ë„ ì‹ í˜¸")
                        self.execute_sell(symbol, quantity, "aggressive_limit", "ê¸°ìˆ ì ë§¤ë„")
                        return
            
            # ğŸ†• 6ìˆœìœ„: ì¥ê¸° ë³´ìœ  ì‹œ ìˆ˜ìµ í™•ì • (5ì¼ ì´ìƒ ë³´ìœ  + 5% ì´ìƒ ìˆ˜ìµ)
            if profit_loss_decimal >= 0.05:
                position_summary = self.position_manager.get_position_summary(symbol)
                first_purchase = position_summary.get('first_purchase_time')
                
                if first_purchase:
                    first_time = datetime.fromisoformat(first_purchase)
                    holding_days = (datetime.now() - first_time).total_seconds() / (24 * 3600)
                    
                    if holding_days >= 5:  # 5ì¼ ì´ìƒ ë³´ìœ 
                        can_sell, sell_reason = self.position_manager.can_sell_symbol(symbol, quantity)
                        if can_sell:
                            self.logger.info(f"â° {stock_name}({symbol}) ì¥ê¸°ë³´ìœ  ìµì ˆ: {holding_days:.1f}ì¼ ë³´ìœ  ({profit_loss_pct:+.2f}%)")
                            self.execute_sell(symbol, quantity, "aggressive_limit", "ì¥ê¸°ìµì ˆ")
                            return
                    
        except Exception as e:
            self.logger.error(f"{symbol} ë§¤ë„ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜: {e}")
    
